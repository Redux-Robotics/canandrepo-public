# canandmessage

This was used to define a common message layer between Redux devices and Redux host code. 
Literally everything got defined out of the TOML files it ingests in `messages/` and then spit out into Rust code, or vendordep code.

This is a cut-down version from the original, just enough to compile/maintain reduxlib.

## Is it worth using

yes and no. The API sucks because this was one of the first things ever Redux wrote in Rust.

## generating files with canandmessage_translingual

[install uv](https://docs.astral.sh/uv/getting-started/installation/) because python packaging sucks

```bash
# generate vendordep DeviceDetails.java
uv run python -m canandmessage_translingual.java messages/[DEVICE].toml /path/to/ReduxLib

# generate vendordep DeviceDetails.h
uv run python -m canandmessage_translingual.cpp messages/[DEVICE].toml /path/to/ReduxLib

# regenerate pycannadmessage in the current directory
uv run python -m canandmessage_translingual.python messages

# generate an rst in target/rst/DEVICE.rst
uv run python -m canandmessage_translingual.rst messages/[DEVICE].toml
```

## pycanandmessage

this is a python equivalent to canandmessage (rust). half of it is autogenerated and half of it is written out.

it is intended for use in prototyping. multiple scripts using the framework are available under `pycanandmessage_test` and use the framework.